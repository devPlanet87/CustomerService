<!DOCTYPE html> 
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>Customer Records</title>
      <!-- Bootstrap 5 CSS --> 
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
   </head>
   <body>
      <div class="container py-4">
         <h3 class="mb-4 text-center">Customer Service Records</h3>
         <!-- Search Box --> 
         <div class="mb-4"> <input type="search" id="searchBox" class="form-control" placeholder="Search by Name, Nickname, Location or Mobile Number" /> </div>
         <!-- Customer List --> 
         <div id="customerList">
            <div class="text-center text-muted">Loading...</div>
         </div>
      </div>
      <!-- Bootstrap JS Bundle --> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script> 
      <!-- Script --> 
       <!-- Script -->
  <script>
    const searchBox = document.getElementById('searchBox');
    const customerList = document.getElementById('customerList');
    let customers = [];
 
    fetch('customers.json')
      .then(res => res.json())
      .then(data => {
        customers = data;
        renderCustomers(customers);
      })
      .catch(err => {
        customerList.innerHTML = '<div class="text-danger text-center">Failed to load data.</div>';
        console.error(err);
      });
 
    function renderCustomers(data) {
      if (data.length === 0) {
        customerList.innerHTML = '<div class="text-center text-muted">No records found</div>';
        return;
      }
 
      customerList.innerHTML = '';
 
      data.forEach(cust => {
        const imageUrl = cust.WarrantyCardImageOrProductImage?.trim()
          ? cust.WarrantyCardImageOrProductImage
          : 'https://via.placeholder.com/150?text=No+Image';
 
        const card = document.createElement('div');
        card.className = 'border rounded p-3 mb-3 bg-light';
 
        card.innerHTML = `
          <div class="row">
            <div class="col-sm-6 mb-2">
              <strong>S.No:</strong> ${cust.Sno}
            </div>
            <div class="col-sm-6 mb-2">
              <strong>Customer ID:</strong> ${cust.CustomerId}
            </div>
            <div class="col-sm-6 mb-2">
              <strong>Name:</strong> ${cust.Name}
            </div>
            <div class="col-sm-6 mb-2">
              <strong>Nickname:</strong> ${cust.Nickname || '-'}
            </div>
            <div class="col-sm-6 mb-2">
              <strong>Mobile:</strong> ${cust.MobileNumber}
            </div>
            <div class="col-sm-6 mb-2">
              <strong>Location:</strong> ${cust.Location}
            </div>
            <div class="col-sm-6 mb-2">
              <strong>Products:</strong> ${cust.Products}
            </div>
            <div class="col-sm-6 mb-2">
              <strong>Product Details:</strong> ${cust.ProductDetails}
            </div>
            <div class="col-12 mb-2">
              <strong>Remarks:</strong> ${cust.Remarks}
            </div>
            <div class="col-12">
              <strong>Product / Warranty Image:</strong><br />
              <img src="${imageUrl}" alt="Image" class="img-fluid rounded mt-2" />
            </div>
          </div>
        `;
 
        customerList.appendChild(card);
      });
    }
 
    // Live search filter
    searchBox.addEventListener('input', () => {
      const query = searchBox.value.trim().toLowerCase();
 
      if (!query) {
        renderCustomers(customers);
        return;
      }
 
      const filtered = customers.filter(c =>
        (c.Name && c.Name.toLowerCase().includes(query)) ||
        (c.Nickname && c.Nickname.toLowerCase().includes(query)) ||
        (c.MobileNumber && c.MobileNumber.toLowerCase().includes(query)) ||
        (c.Location && c.Location.toLowerCase().includes(query))
      );
 
      renderCustomers(filtered);
    });
  </script>
   </body>
</html>

